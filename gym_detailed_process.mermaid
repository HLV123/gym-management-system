flowchart TD
    %% ADMIN DETAILED PROCESSES
    subgraph "ðŸ‘‘ ADMIN PROCESSES"
        direction TB
        
        %% Member Management Process
        subgraph "ðŸ‘¥ MEMBER MANAGEMENT"
            A1[ðŸ“ Input Member Data] --> A2[ðŸ“‹ Validate Information]
            A2 --> A3{Valid Data?}
            A3 -->|No| A4[âŒ Show Error Message]
            A4 --> A1
            A3 -->|Yes| A5[ðŸ“¦ Select Package Type]
            A5 --> A6[ðŸ’° Display Package Price]
            A6 --> A7[ðŸ“… Calculate End Date]
            A7 --> A8[ðŸ’¾ Save to Database]
            A8 --> A9[âœ… Success Message]
            
            A10[ðŸ—‘ï¸ Select Member to Remove] --> A11[âš ï¸ Confirm Deletion]
            A11 --> A12{Confirm?}
            A12 -->|No| A13[âŒ Cancel Operation]
            A12 -->|Yes| A14[ðŸ”— Remove from Trainers]
            A14 --> A15[ðŸ’¾ Delete from Database]
            A15 --> A16[âœ… Member Removed]
        end
        
        %% Trainer Assignment Process
        subgraph "ðŸ”— TRAINER ASSIGNMENT"
            B1[ðŸ“‹ List Available Trainers] --> B2[ðŸ‘¤ Show Trainer Specialization]
            B2 --> B3[ðŸ“‹ List All Members]
            B3 --> B4[ðŸ‘¥ Select Trainer & Member]
            B4 --> B5[ðŸ” Check Current Assignment]
            B5 --> B6{Already Assigned?}
            B6 -->|Yes| B7[âš ï¸ Show Warning]
            B6 -->|No| B8[ðŸ”— Create Assignment]
            B8 --> B9[ðŸ’¾ Update Trainer's List]
            B9 --> B10[âœ… Assignment Complete]
        end
        
        %% Revenue Report Process
        subgraph "ðŸ’° REVENUE REPORTING"
            C1[ðŸ“Š Collect All Members] --> C2[ðŸ’° Calculate Package Prices]
            C2 --> C3[ðŸ“¦ Group by Package Type]
            C3 --> C4[ðŸ§® Sum Total Revenue]
            C4 --> C5[ðŸ“ˆ Calculate Percentages]
            C5 --> C6[ðŸ‘¥ Count Active/Expired]
            C6 --> C7[ðŸ“‹ Generate Report]
            C7 --> C8[ðŸ“¤ Display Results]
        end
    end
    
    %% TRAINER DETAILED PROCESSES
    subgraph "ðŸƒâ€â™‚ï¸ TRAINER PROCESSES"
        direction TB
        
        %% Schedule Creation Process
        subgraph "ðŸ“… SCHEDULE CREATION"
            D1[ðŸ‘¥ Check Assigned Members] --> D2{Has Members?}
            D2 -->|No| D3[âŒ No Members Assigned]
            D2 -->|Yes| D4[ðŸ“‹ Select Member]
            D4 --> D5[ðŸ“… Choose Date & Time]
            D5 --> D6[ðŸ‹ï¸â€â™‚ï¸ Select Exercises]
            D6 --> D7[ðŸŽ¯ Match Trainer Specialization]
            D7 --> D8[ðŸ’¾ Save Schedule]
            D8 --> D9[âœ… Schedule Created]
        end
        
        %% Attendance Marking Process
        subgraph "âœ… ATTENDANCE MARKING"
            E1[ðŸ‘¥ List Assigned Members] --> E2[ðŸ‘¤ Select Member]
            E2 --> E3[ðŸ” Check Assignment]
            E3 --> E4{Member Assigned?}
            E4 -->|No| E5[âŒ Access Denied]
            E4 -->|Yes| E6[ðŸ“… Check Today's Date]
            E6 --> E7{Already Marked?}
            E7 -->|Yes| E8[âš ï¸ Already Attended]
            E7 -->|No| E9[âœ… Mark Attendance]
            E9 --> E10[ðŸ• Record Time]
            E10 --> E11[ðŸ’¾ Save Record]
            E11 --> E12[âœ… Attendance Saved]
        end
        
        %% Progress Update Process
        subgraph "ðŸ“ˆ PROGRESS TRACKING"
            F1[ðŸ‘¥ Select Assigned Member] --> F2[ðŸ“Š View Current Progress]
            F2 --> F3[ðŸ‹ï¸â€â™‚ï¸ Enter Exercise Name]
            F3 --> F4[ðŸ“ˆ Enter Progress Data]
            F4 --> F5[ðŸŽ¯ Update Training Status]
            F5 --> F6{Status Options}
            F6 --> F7[â­ Xuáº¥t sáº¯c]
            F6 --> F8[âœ… Tá»‘t]
            F6 --> F9[ðŸ“Š BÃ¬nh thÆ°á»ng]
            F6 --> F10[âš ï¸ Cáº§n cáº£i thiá»‡n]
            F7 --> F11[ðŸ’¾ Save Progress]
            F8 --> F11
            F9 --> F11
            F10 --> F11
            F11 --> F12[âœ… Progress Updated]
        end
    end
    
    %% MEMBER DETAILED PROCESSES
    subgraph "ðŸ‘¤ MEMBER PROCESSES"
        direction TB
        
        %% Personal Info Check Process
        subgraph "ðŸ“Š PERSONAL INFO"
            G1[ðŸ‘¤ Load Member Data] --> G2[ðŸ“… Check Subscription End]
            G2 --> G3[ðŸ§® Calculate Days Left]
            G3 --> G4{Days Remaining}
            G4 -->|> 30| G5[âœ… Status: Active]
            G4 -->|7-30| G6[âš ï¸ Status: Expiring Soon]
            G4 -->|< 7| G7[ðŸš¨ Status: Urgent Renewal]
            G4 -->|â‰¤ 0| G8[âŒ Status: Expired]
            G5 --> G9[ðŸ“Š Display Full Info]
            G6 --> G9
            G7 --> G9
            G8 --> G9
        end
        
        %% Self Progress Update Process
        subgraph "ðŸ“ˆ SELF PROGRESS"
            H1[ðŸ“Š View Current Progress] --> H2[ðŸ‹ï¸â€â™‚ï¸ Enter Exercise]
            H2 --> H3[ðŸ“ˆ Enter Achievement]
            H3 --> H4[ðŸ“… Add Timestamp]
            H4 --> H5[ðŸ’¾ Save Progress]
            H5 --> H6[âœ… Progress Saved]
        end
        
        %% Membership Renewal Process
        subgraph "ðŸ”„ RENEWAL PROCESS"
            I1[ðŸ“¦ View Current Package] --> I2[ðŸ“… Check Expiry Date]
            I2 --> I3[ðŸ“‹ Show Available Packages]
            I3 --> I4[ðŸ’° Display Package Prices]
            I4 --> I5[ðŸ“¦ Select New Package]
            I5 --> I6[ðŸ“… Calculate New End Date]
            I6 --> I7{Current Active?}
            I7 -->|Yes| I8[âž• Extend from Current End]
            I7 -->|No| I9[ðŸ†• Start from Today]
            I8 --> I10[ðŸ’¾ Update Subscription]
            I9 --> I10
            I10 --> I11[âœ… Renewal Complete]
        end
    end
    
    %% SYSTEM PROCESSES
    subgraph "âš™ï¸ SYSTEM PROCESSES"
        direction TB
        
        %% Data Persistence Process
        subgraph "ðŸ’¾ DATA MANAGEMENT"
            J1[ðŸ“Š Collect All Data] --> J2[ðŸ”„ Serialize Objects]
            J2 --> J3[ðŸ“ Convert to JSON]
            J3 --> J4[ðŸ’¾ Write to File]
            J4 --> J5[âœ… Data Saved]
            
            J6[ðŸ“‚ Read File] --> J7{File Exists?}
            J7 -->|No| J8[ðŸŽ² Create Sample Data]
            J7 -->|Yes| J9[ðŸ“– Parse JSON]
            J9 --> J10[ðŸ”„ Recreate Objects]
            J10 --> J11[âœ… Data Loaded]
        end
        
        %% CSV Export Process
        subgraph "ðŸ“¤ CSV EXPORT"
            K1[ðŸ“‹ Select Data Type] --> K2{Export Type}
            K2 --> K3[ðŸ‘¥ Members Data]
            K2 --> K4[âœ… Attendance Data]
            K2 --> K5[ðŸƒâ€â™‚ï¸ Trainers Data]
            K2 --> K6[ðŸ‹ï¸â€â™‚ï¸ Equipment Data]
            K3 --> K7[ðŸ“Š Format Member Info]
            K4 --> K8[ðŸ“Š Format Attendance Records]
            K5 --> K9[ðŸ“Š Format Trainer Info]
            K6 --> K10[ðŸ“Š Format Equipment Info]
            K7 --> K11[ðŸ“ Write CSV Headers]
            K8 --> K11
            K9 --> K11
            K10 --> K11
            K11 --> K12[ðŸ“¤ Export File]
            K12 --> K13[âœ… Export Complete]
        end
    end
    
    %% Cross-process connections
    A8 --> J1
    B9 --> J1
    D8 --> J1
    E11 --> J1
    F11 --> J1
    H5 --> J1
    I10 --> J1
    
    %% Styling
    classDef adminProcess fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    classDef trainerProcess fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
    classDef memberProcess fill:#1abc9c,stroke:#16a085,stroke-width:2px,color:#fff
    classDef systemProcess fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
    classDef decision fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#000
    classDef success fill:#27ae60,stroke:#229954,stroke-width:2px,color:#fff
    classDef error fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
    
    class A1,A2,A5,A6,A7,A8,A10,A11,A14,A15,B1,B2,B3,B4,B5,B8,B9,C1,C2,C3,C4,C5,C6,C7,C8 adminProcess
    class D1,D4,D5,D6,D7,D8,E1,E2,E3,E6,E9,E10,E11,F1,F2,F3,F4,F5,F11 trainerProcess
    class G1,G2,G3,G9,H1,H2,H3,H4,H5,I1,I2,I3,I4,I5,I6,I8,I9,I10 memberProcess
    class J1,J2,J3,J4,J6,J8,J9,J10,K1,K3,K4,K5,K6,K7,K8,K9,K10,K11,K12 systemProcess
    class A3,A12,B6,D2,E4,E7,F6,G4,I7,J7,K2 decision
    class A9,A16,B10,D9,E12,F12,G5,H6,I11,J5,J11,K13 success
    class A4,A13,D3,E5,E8 error